# Requirements Analysis

<요구 사항 분석서>

게임을 설계하고 만들어 본 경험이 거의 없기 때문에  
전문가처럼 체계적이고 디테일한 요구 분석서를 작성하는 건 불가능하다.

요구 사항을 완벽하게 명시한 뒤에 코딩에 돌입하는 것이 아니라,  
설계/구현 루틴을 수없이 돌리는 방식을 택한다.
 

---

## Index

[TODO](#todo)

[Best Practice](#best-practice)  

[기능 요구 사항](#기능-요구-사항)  

  [Rule](#rule)  


[프로그래밍 요구 사항](#프로그래밍-요구-사항)  

[Coding Standard](#coding-standard)  

[Stuff you should look for](#stuff-you-should-look-for)



---

## TODO

- [ ] 테트로미노 모델링

- [ ] 게임 프레임(엔진)

  - [ ] 입력 출력 로직
  - [ ] 멀티 프로세스/쓰레드 프로그래밍 구조 설계  


---

- [ ] UI 설계
  - [ ] 테트로미노 블록에 색깔 어떻게 입힐지.

- [ ] HUD 설계

---

- [ ] 점수 시스템

- [ ] 사운드?


---

## Best Practice

이 정도 수준까지 구현하는 건 무리겠지만,
참고할 만한 구현물들.

- [TETRIS 99](https://namu.wiki/w/TETRIS%2099)
- [Tetris Effect](https://namu.wiki/w/Tetris%20Effect)
- [TETRIS](https://tetris.com/play-tetris) (아마 오리지널인듯?)

이걸 콘솔 상에서 구현해보는 것이 원하는 결과물.

---


## 기능 요구 사항

🔨 설계 진행 중..

### Rule

2차원 좌표계에 커다란 행렬(매트릭스)이 있다.  

게임이 시작되면

행렬의 스카이라인(상단 경계선)에서 테트로미노가 일정 주기로 1개씩 랜덤하게 나온다(spawn).  
테트로미노는 일정 속도로 아래 방향으로 떨어지며 바닥과 닿으면 정지한다.

플레이어는 테트로미노를 회전, 이동, 가속할 수 있다.  
(한번에 맨 아래 블럭에 닿게끔 하는 연산도 지원하면 좋을 듯.  
테트로미노(Tetromino)에 대해 자세히 알고 싶다면 -> [위키피디아](https://en.wikipedia.org/wiki/Tetromino))

빈 공간 없이 블록의 수평 행을 채우면 해당 라인이 클리어된다. (위에 있던 블록은 아래로 떨어짐)

테트로미노가 스카이라인을 넘어 서면 게임이 종료된다.

플레이어는 전략적으로 테트로미노 연산을 사용하여 최대한 버티면서 게임을 플레이 한다.

(점수 시스템도 있어야 하는데 이건 나중에)


---
 
### 입출력 요구 사항

#### 입력

#### 출력


---


## 프로그래밍 요구 사항

출처: [우테코 프리코스](https://github.com/woowacourse-precourse/java-lotto#-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-%EC%9A%94%EA%B5%AC-%EC%82%AC%ED%95%AD)

반드시 지키자는 건 아니다.  
게임 프로그래밍과는 다른 부분도 있을 거다.  
그냥 이런 뉘앙스를 인지하고 프로그래밍 한다 정도?


- indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
  - 예를 들어 while문 안에 if문이 있으면 들여쓰기는 2이다.
  - 힌트: indent(인덴트, 들여쓰기) depth를 줄이는 좋은 방법은 함수(또는 메서드)를 분리하면 된다.

- 3항 연산자를 쓰지 않는다.

- 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다.
  - 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.

- else 예약어를 쓰지 않는다.
  - 힌트: if 조건절에서 값을 return하는 방식으로 구현하면 else를 사용하지 않아도 된다.
  - else를 쓰지 말라고 하니 switch/case로 구현하는 경우가 있는데 switch/case도 허용하지 않는다.

---

## Coding Standard

* [POCU 아카데미 C 코딩 표준](https://docs.popekim.com/ko/coding-standards/pocu-c)(Linux 프로그래밍용)

* 애매한 점들 추가적으로 정의하기

  * 예를 들어.. #define은 상수 말고도 매크로 함수를 정의하기 위해 작성하기도 하는데  
    이때도 대문자로 작성? or 소문자?
  * 더 근본적으론 #define으로 함수를 정의할 필요가 있는가? 어차피 컴파일러가 알아서 인라인 최적화 해주지 않을까?  
    물론 일반 함수로는 대체될 수 없는 것도 있을 순 있음. 구조체 선언 같은 거. 이거는 그래서 대문자로 작성하긴 함.

## Stuff you should look for

* 매크로 정의할 때 표준 라이브러리에 선언된 것과 겹치지 않도록 주의!!  
* 어떤 코딩 컨벤션을 사용하든지 정답은 없다.  
  단, 어떤 규칙을 따르기로 했으면 그 일관성을 유지할 것.  
* 매크로, 구조체, 공용체, 함수 중 사용하지 않는 건 과감하게 다 지울 것. (실수할 여지가 많다.)  
* assert 쓰는 걸 주저하지 말자.  
  버그는 일찍 알아챌수록 좋다.
* `char[]`나 `wchar_t[]` 출력할 때 끝에 널 문자('\0') 넣기.  
* null pointer exception 유의  
* exit() 류의 시스템 콜을 사용할 때는 안닫힌 파일이나 그밖에 정리되지 않은 항목은 없는지 잘 확인해 줄 것.
* 주요 시스템 콜이 실패했는지 확인하는 로직 빼먹지 말고 작성.  
  ```c
  if (smth_syscall(...) == -1) {
      handle_error(...);
  }
  ```
  